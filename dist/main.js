(()=>{"use strict";function e(e,n,o){var t=function(e,n,o){var t=r(e,e.VERTEX_SHADER,n),a=r(e,e.FRAGMENT_SHADER,o);if(!t||!a)return null;var c=e.createProgram();if(!c)return null;if(e.attachShader(c,t),e.attachShader(c,a),e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS)){var i=e.getProgramInfoLog(c);return console.log("无法连接程序对象: 2 "+i),e.deleteProgram(c),e.deleteShader(a),e.deleteShader(t),null}return c}(e,n,o);return t?(e.useProgram(t),e.program=t,!0):(console.log("无法创建程序对象 1"),!1)}function r(e,r,n){var o=e.createShader(r);if(null==o)return console.log("无法创建着色器 3"),null;if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var t=e.getShaderInfoLog(o);return console.log("Failed to compile shader: 4"+t),e.deleteShader(o),null}return o}const n=e=>{e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)},o={clearBackground:n,point:function(r){if(!e(r,"\n      void main() {\n          gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n          gl_PointSize = 10.0;\n      }\n    ","\n      void main() {\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n      }\n    "))throw new Error("can not create program, please check your shader");n(r),r.drawArrays(r.POINTS,0,1)},clickPoints:function(r){if(!e(r,"\n      attribute vec4 DynamicPosition;\n      void main() {\n          gl_Position = DynamicPosition;\n          gl_PointSize = 10.0;\n      }\n    ","\n      void main() {\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n      }\n    "))throw new Error("can not create program, please check your shader");n(r),document.onclick=e=>{const o=r.getAttribLocation(r.program,"DynamicPosition"),t=(a=e.clientX,c=e.clientY,0,{x:(a-(i=r.canvas.getBoundingClientRect()).left-200)/200,y:-(c-i.top-200)/200,z:0});var a,c,i;r.vertexAttrib3f(o,t.x,t.y,t.z),n(r),r.drawArrays(r.POINTS,0,1)}}};!function(e){const r=document.getElementById("renderer-list");r.innerHTML="";for(const n of e){const e=document.createElement("li"),o=location.href.split("?")[0]+"?which="+n;e.innerHTML=`<a href="${o}"> ${n} </a>`,r.appendChild(e)}}(Object.keys(o));const t=o;class a{constructor(e,r){this.gl=e,this.whichExample=r.get("which")||"clear-bg"}render(){const e=t?.[this.whichExample];if(!e)throw new Error(`can not find renderer for ${this.whichExample}`);e.apply(this,[this.gl])}}window.onerror=function(e){console.error(e);const r=document.getElementById("show-error");r.innerHTML=e,r.style.color="red"},function(){const e=("canvas",document.getElementById("canvas").getContext("webgl"));if(!e)throw new Error("can not create webgl context");const r=new URLSearchParams(location.search);new a(e,r).render()}()})();